<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Q4 ‚Äì Minh h·ªça so s√°nh t·ª∑ l·ªá ch·∫©n ƒëo√°n hen suy·ªÖn theo d·ªã ·ª©ng th√∫ c∆∞ng</title>

  <!-- ƒê·ªÉ hi·ªÉn th·ªã ƒë·∫πp tr√™n ƒëi·ªán tho·∫°i -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      background: #f5f7fb;
      color: #222;
      padding: 16px;
      display: flex;
      justify-content: center;
    }

    .page {
      max-width: 960px;
      width: 100%;
      background: #ffffff;
      border-radius: 16px;
      padding: 20px 18px 24px;
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.08);
    }

    .tag {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      background: #e7f0ff;
      color: #255fdb;
      margin-bottom: 8px;
      font-weight: 600;
    }

    h1 {
      font-size: 22px;
      margin-bottom: 6px;
    }

    .subtitle {
      font-size: 13px;
      color: #555;
      margin-bottom: 16px;
    }

    .steps {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
      font-size: 12px;
      margin-bottom: 14px;
    }

    .step {
      padding: 8px 10px;
      border-radius: 999px;
      background: #f1f3ff;
      text-align: center;
    }

    .step strong {
      color: #364fc7;
    }

    .grid {
      display: grid;
      grid-template-columns: 5fr 5fr;
      gap: 16px;
      margin-top: 4px;
    }

    .card {
      background: #fafbff;
      border-radius: 14px;
      padding: 14px 14px;
      border: 1px solid #e0e5ff;
    }

    .card h2 {
      font-size: 17px;
      margin-bottom: 6px;
    }

    .card p {
      font-size: 13px;
      line-height: 1.5;
      color: #444;
    }

    .data-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 12px;
      margin-top: 8px;
    }

    .data-table th,
    .data-table td {
      border: 1px solid #dde1ff;
      padding: 5px 6px;
      text-align: center;
    }

    .data-table th {
      background: #edf0ff;
    }

    .badge-group {
      margin-top: 8px;
      font-size: 12px;
    }

    .badge {
      display: inline-block;
      padding: 3px 8px;
      border-radius: 999px;
      margin-right: 6px;
      margin-bottom: 4px;
      background: #edf2ff;
      color: #3749a6;
    }

    .note {
      margin-top: 8px;
      font-size: 12px;
      background: #fff4e6;
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid #ffd8a8;
      color: #92400e;
    }

    .result-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 10px;
    }

    .result-box {
      flex: 1 1 140px;
      background: #ffffff;
      border-radius: 12px;
      border: 1px solid #e0e5ff;
      padding: 8px 10px;
    }

    .result-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #777;
    }

    .result-value {
      font-size: 16px;
      font-weight: 700;
      margin-top: 4px;
    }

    .result-desc {
      font-size: 12px;
      color: #666;
      margin-top: 2px;
    }

    .conclusion {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.7;
    }

    .conclusion strong {
      color: #255fdb;
    }

    .toggle-btn {
      margin-top: 8px;
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 999px;
      border: 1px solid #d0d4ff;
      background: #ffffff;
      cursor: pointer;
      color: #364fc7;
    }

    .detail {
      margin-top: 8px;
      font-size: 12.5px;
      line-height: 1.6;
      display: none;
      color: #444;
    }

    .detail code {
      background: #f3f4ff;
      padding: 2px 4px;
      border-radius: 4px;
      font-size: 12px;
    }

    .footer {
      margin-top: 14px;
      font-size: 11px;
      text-align: right;
      color: #888;
    }

    .footer span {
      font-weight: 600;
      color: #555;
    }

    @media (max-width: 800px) {
      body {
        padding: 10px;
      }

      .page {
        padding: 16px 14px 18px;
        border-radius: 12px;
      }

      h1 {
        font-size: 20px;
      }

      .subtitle {
        font-size: 12.5px;
      }

      .steps {
        grid-template-columns: 1fr;
      }

      .grid {
        grid-template-columns: 1fr;
      }

      .card {
        padding: 12px 10px;
      }

      .footer {
        text-align: center;
        margin-top: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="tag">Q4 ¬∑ Th·ª±c h√†nh th·ªëng k√™ ¬∑ Two-proportion test</div>
    <h1>So s√°nh t·ª∑ l·ªá ch·∫©n ƒëo√°n hen suy·ªÖn theo d·ªã ·ª©ng th√∫ c∆∞ng</h1>
    <p class="subtitle">
      Minh h·ªça tr·ª±c quan c√°ch ki·ªÉm ƒë·ªãnh gi·∫£ thuy·∫øt v√† hi·ªÉu k·∫øt qu·∫£ p-value, kho·∫£ng tin c·∫≠y
      cho s·ª± kh√°c bi·ªát gi·ªØa hai t·ª∑ l·ªá.
    </p>

    <!-- 3 b∆∞·ªõc ch√≠nh -->
    <div class="steps">
      <div class="step"><strong>B∆∞·ªõc 1:</strong> Xem d·ªØ li·ªáu & t·ª∑ l·ªá</div>
      <div class="step"><strong>B∆∞·ªõc 2:</strong> ƒê·∫∑t gi·∫£ thuy·∫øt H‚ÇÄ / H‚ÇÅ</div>
      <div class="step"><strong>B∆∞·ªõc 3:</strong> Ki·ªÉm ƒë·ªãnh & r√∫t ra k·∫øt lu·∫≠n</div>
    </div>

    <div class="grid">
      <!-- B√™n tr√°i: d·ªØ li·ªáu & gi·∫£ thuy·∫øt -->
      <div class="card">
        <h2>B∆∞·ªõc 1 & 2 ‚Äì D·ªØ li·ªáu v√† gi·∫£ thuy·∫øt</h2>
        <p>
          Ch√∫ng ta mu·ªën ki·ªÉm tra xem t·ª∑ l·ªá b·ªánh nh√¢n <strong>ƒë∆∞·ª£c ch·∫©n ƒëo√°n hen suy·ªÖn
          (Diagnosis = 1)</strong> c√≥ kh√°c nhau gi·ªØa hai nh√≥m:
        </p>
        <ul style="font-size: 13px; margin: 6px 0 0 18px; color:#444;">
          <li>Nh√≥m <strong>Kh√¥ng d·ªã ·ª©ng th√∫ c∆∞ng</strong> (PetAllergy = 0)</li>
          <li>Nh√≥m <strong>C√≥ d·ªã ·ª©ng th√∫ c∆∞ng</strong> (PetAllergy = 1)</li>
        </ul>

        <table class="data-table">
          <thead>
            <tr>
              <th>Nh√≥m</th>
              <th>S·ªë hen (Diagnosis=1)</th>
              <th>T·ªïng s·ªë</th>
              <th>T·ª∑ l·ªá (%)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Kh√¥ng d·ªã ·ª©ng (0)</td>
              <td>106</td>
              <td>1995</td>
              <td><strong>5.31%</strong></td>
            </tr>
            <tr>
              <td>C√≥ d·ªã ·ª©ng (1)</td>
              <td>18</td>
              <td>397</td>
              <td><strong>4.53%</strong></td>
            </tr>
          </tbody>
        </table>

        <div class="badge-group">
          <div class="badge">H‚ÇÄ: p<sub>allergy</sub> = p<sub>nonallergy</sub></div>
          <div class="badge">H‚ÇÅ: p<sub>allergy</sub> ‚â† p<sub>nonallergy</sub></div>
        </div>

        <div class="note">
          <strong>Nh√¨n b·∫±ng m·∫Øt:</strong> nh√≥m <strong>kh√¥ng d·ªã ·ª©ng th√∫ c∆∞ng</strong> c√≥ v·∫ª
          c√≥ t·ª∑ l·ªá hen suy·ªÖn h∆°i cao h∆°n, kho·∫£ng <strong>0.8 ƒëi·ªÉm ph·∫ßn trƒÉm</strong> so v·ªõi nh√≥m d·ªã ·ª©ng.
          Tuy nhi√™n ƒë√¢y m·ªõi ch·ªâ l√† quan s√°t m√¥ t·∫£, ch∆∞a ph·∫£i k·∫øt lu·∫≠n.
        </div>
      </div>

      <!-- B√™n ph·∫£i: bi·ªÉu ƒë·ªì -->
      <div class="card">
        <h2>Bi·ªÉu ƒë·ªì: so s√°nh hai t·ª∑ l·ªá</h2>
        <p style="font-size:12.5px; margin-bottom:6px;">
          Bi·ªÉu ƒë·ªì c·ªôt th·ªÉ hi·ªán t·ª∑ l·ªá ch·∫©n ƒëo√°n hen suy·ªÖn ·ªü hai nh√≥m. Di chu·ªôt v√†o t·ª´ng c·ªôt ƒë·ªÉ xem gi√° tr·ªã.
        </p>
        <canvas id="q4Chart" height="210"></canvas>
      </div>
    </div>

    <!-- K·∫øt qu·∫£ ki·ªÉm ƒë·ªãnh -->
    <div class="card" style="margin-top: 16px;">
      <h2>B∆∞·ªõc 3 ‚Äì K·∫øt qu·∫£ ki·ªÉm ƒë·ªãnh & √Ω nghƒ©a</h2>

      <div class="result-row">
        <div class="result-box">
          <div class="result-label">Ph∆∞∆°ng ph√°p</div>
          <div class="result-value">Chi-square test</div>
          <div class="result-desc">Ki·ªÉm ƒë·ªãnh hai t·ª∑ l·ªá ƒë·ªôc l·∫≠p</div>
        </div>

        <div class="result-box">
          <div class="result-label">p-value</div>
          <div class="result-value">0.606</div>
          <div class="result-desc">L·ªõn h∆°n nhi·ªÅu m·ª©c Œ± = 0.05</div>
        </div>

        <div class="result-box">
          <div class="result-label">∆Ø·ªõc l∆∞·ª£ng Œîp</div>
          <div class="result-value">‚âà ‚àí0.78%</div>
          <div class="result-desc">4.53% ‚àí 5.31%</div>
        </div>

        <div class="result-box">
          <div class="result-label">KTC 95% cho Œîp</div>
          <div class="result-value">Ch·ª©a 0</div>
          <div class="result-desc">Kh√¥ng lo·∫°i tr·ª´ kh·∫£ nƒÉng hai t·ª∑ l·ªá b·∫±ng nhau</div>
        </div>
      </div>

      <div class="conclusion">
        <strong>K·∫øt lu·∫≠n:</strong> V√¨ p-value = 0.606 &gt; 0.05, ch√∫ng ta
        <strong>kh√¥ng b√°c b·ªè gi·∫£ thuy·∫øt H‚ÇÄ</strong>. M·∫∑c d√π trong m·∫´u,
        nh√≥m c√≥ d·ªã ·ª©ng th√∫ c∆∞ng c√≥ t·ª∑ l·ªá hen suy·ªÖn <strong>h∆°i th·∫•p h∆°n</strong> kho·∫£ng
        0.8 ƒëi·ªÉm ph·∫ßn trƒÉm so v·ªõi nh√≥m kh√¥ng d·ªã ·ª©ng, nh∆∞ng b·∫±ng ch·ª©ng th·ªëng k√™
        <strong>ch∆∞a ƒë·ªß m·∫°nh</strong> ƒë·ªÉ kh·∫≥ng ƒë·ªãnh r·∫±ng d·ªã ·ª©ng th√∫ c∆∞ng l√†m thay ƒë·ªïi
        t·ª∑ l·ªá ƒë∆∞·ª£c ch·∫©n ƒëo√°n hen suy·ªÖn trong to√†n b·ªô t·ªïng th·ªÉ.
      </div>

      <button class="toggle-btn" onclick="toggleDetail()">
        üîç Xem gi·∫£i th√≠ch p-value & kho·∫£ng tin c·∫≠y (cho ng∆∞·ªùi m·ªõi h·ªçc)
      </button>

      <div class="detail" id="detailBox">
        <p>
          <strong>p-value = 0.606 nghƒ©a l√† g√¨?</strong><br/>
          N·∫øu th·ª±c t·∫ø hai nh√≥m <em>kh√¥ng h·ªÅ kh√°c nhau</em> v·ªÅ t·ª∑ l·ªá hen suy·ªÖn
          (H‚ÇÄ ƒë√∫ng), th√¨ kh·∫£ nƒÉng ch√∫ng ta th·∫•y m·ªôt s·ª± kh√°c bi·ªát l·ªõn nh∆∞ m·∫´u
          n√†y (ho·∫∑c l·ªõn h∆°n) l√† kho·∫£ng <strong>60.6%</strong>. ƒê√¢y l√† m·ªôt x√°c su·∫•t kh√° l·ªõn,
          n√™n ta kh√¥ng c√≥ l√Ω do ƒë·ªÉ n√≥i H‚ÇÄ sai.
        </p>
        <p style="margin-top:6px;">
          <strong>Kho·∫£ng tin c·∫≠y 95% cho Œîp ch·ª©a 0 nghƒ©a l√† g√¨?</strong><br/>
          KTC 95% cho Œîp = p<sub>allergy</sub> ‚àí p<sub>nonallergy</sub> bao g·ªìm
          c·∫£ gi√° tr·ªã 0. ƒêi·ªÅu ƒë√≥ n√≥i r·∫±ng, v·ªõi d·ªØ li·ªáu hi·ªán c√≥, ch√™nh l·ªách th·∫≠t
          s·ª± gi·ªØa hai t·ª∑ l·ªá trong d√¢n s·ªë c√≥ th·ªÉ l√† d∆∞∆°ng, √¢m ho·∫∑c b·∫±ng 0 ‚Äì
          t·ª©c l√† <strong>ch√∫ng ta kh√¥ng th·ªÉ kh·∫≥ng ƒë·ªãnh t·ªìn t·∫°i kh√°c bi·ªát r√µ r√†ng</strong>.
        </p>
        <p style="margin-top:6px;">
          ƒê√¢y l√† v√≠ d·ª• ƒëi·ªÉn h√¨nh cho vi·ªác:
          <strong>kh√°c bi·ªát m√¥ t·∫£ (~0.8%) ch∆∞a ch·∫Øc ƒë√£ c√≥ √Ω nghƒ©a th·ªëng k√™</strong>.
        </p>
      </div>
    </div>

    <div class="footer">
      Demo Q4 ¬∑ <span>by vanhkhuc</span>
    </div>
  </div>

  <script>
    // V·∫Ω bi·ªÉu ƒë·ªì v·ªõi Chart.js
    const ctx = document.getElementById('q4Chart').getContext('2d');

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Kh√¥ng d·ªã ·ª©ng (0)', 'C√≥ d·ªã ·ª©ng (1)'],
        datasets: [{
          label: 'T·ª∑ l·ªá ch·∫©n ƒëo√°n hen suy·ªÖn (%)',
          data: [5.31, 4.53],
          backgroundColor: ['#88c8ff', '#ffb3c6'],
          borderRadius: 10,
          borderSkipped: false
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: {
            callbacks: {
              label: function (context) {
                return context.parsed.y.toFixed(2) + '% b·ªánh nh√¢n ƒë∆∞·ª£c ch·∫©n ƒëo√°n';
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: 'T·ª∑ l·ªá (%)'
            }
          }
        }
      }
    });

    // ·∫®n/hi·ªán gi·∫£i th√≠ch chi ti·∫øt
    function toggleDetail() {
      const box = document.getElementById('detailBox');
      box.style.display = (box.style.display === 'block') ? 'none' : 'block';
    }
  </script>
</body>
</html>
